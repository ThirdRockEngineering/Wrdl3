{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar cid = require('multiformats/cid');\n\nvar dagPB = require('@ipld/dag-pb');\n\nvar sha2 = require('multiformats/hashes/sha2');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar dagPB__namespace = /*#__PURE__*/_interopNamespace(dagPB);\n\nconst persist = async (buffer, blockstore, options) => {\n  if (!options.codec) {\n    options.codec = dagPB__namespace;\n  }\n\n  if (!options.hasher) {\n    options.hasher = sha2.sha256;\n  }\n\n  if (options.cidVersion === undefined) {\n    options.cidVersion = 1;\n  }\n\n  if (options.codec === dagPB__namespace && options.hasher !== sha2.sha256) {\n    options.cidVersion = 1;\n  }\n\n  const multihash = await options.hasher.digest(buffer);\n  const cid$1 = cid.CID.create(options.cidVersion, options.codec.code, multihash);\n\n  if (!options.onlyHash) {\n    await blockstore.put(cid$1, buffer, {\n      signal: options.signal\n    });\n  }\n\n  return cid$1;\n};\n\nexports.persist = persist;","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/ipfs-core/cjs/src/components/files/utils/persist.js"],"names":["Object","defineProperty","exports","value","cid","require","dagPB","sha2","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","dagPB__namespace","persist","buffer","blockstore","options","codec","hasher","sha256","cidVersion","undefined","multihash","digest","cid$1","CID","code","onlyHash","put","signal"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,GAAG,GAAGC,OAAO,CAAC,kBAAD,CAAjB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,cAAD,CAAnB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,0BAAD,CAAlB;;AAEA,SAASG,iBAAT,CAA2BC,CAA3B,EAA8B;AAC5B,MAAIA,CAAC,IAAIA,CAAC,CAACC,UAAX,EAAuB,OAAOD,CAAP;AACvB,MAAIE,CAAC,GAAGX,MAAM,CAACY,MAAP,CAAc,IAAd,CAAR;;AACA,MAAIH,CAAJ,EAAO;AACLT,IAAAA,MAAM,CAACa,IAAP,CAAYJ,CAAZ,EAAeK,OAAf,CAAuB,UAAUC,CAAV,EAAa;AAClC,UAAIA,CAAC,KAAK,SAAV,EAAqB;AACnB,YAAIC,CAAC,GAAGhB,MAAM,CAACiB,wBAAP,CAAgCR,CAAhC,EAAmCM,CAAnC,CAAR;AACAf,QAAAA,MAAM,CAACC,cAAP,CAAsBU,CAAtB,EAAyBI,CAAzB,EAA4BC,CAAC,CAACE,GAAF,GAAQF,CAAR,GAAY;AACtCG,UAAAA,UAAU,EAAE,IAD0B;AAEtCD,UAAAA,GAAG,EAAE,YAAY;AAAE,mBAAOT,CAAC,CAACM,CAAD,CAAR;AAAc;AAFK,SAAxC;AAID;AACF,KARD;AASD;;AACDJ,EAAAA,CAAC,CAAC,SAAD,CAAD,GAAeF,CAAf;AACA,SAAOT,MAAM,CAACoB,MAAP,CAAcT,CAAd,CAAP;AACD;;AAED,IAAIU,gBAAgB,GAAG,aAAab,iBAAiB,CAACF,KAAD,CAArD;;AAEA,MAAMgB,OAAO,GAAG,OAAOC,MAAP,EAAeC,UAAf,EAA2BC,OAA3B,KAAuC;AACrD,MAAI,CAACA,OAAO,CAACC,KAAb,EAAoB;AAClBD,IAAAA,OAAO,CAACC,KAAR,GAAgBL,gBAAhB;AACD;;AACD,MAAI,CAACI,OAAO,CAACE,MAAb,EAAqB;AACnBF,IAAAA,OAAO,CAACE,MAAR,GAAiBpB,IAAI,CAACqB,MAAtB;AACD;;AACD,MAAIH,OAAO,CAACI,UAAR,KAAuBC,SAA3B,EAAsC;AACpCL,IAAAA,OAAO,CAACI,UAAR,GAAqB,CAArB;AACD;;AACD,MAAIJ,OAAO,CAACC,KAAR,KAAkBL,gBAAlB,IAAsCI,OAAO,CAACE,MAAR,KAAmBpB,IAAI,CAACqB,MAAlE,EAA0E;AACxEH,IAAAA,OAAO,CAACI,UAAR,GAAqB,CAArB;AACD;;AACD,QAAME,SAAS,GAAG,MAAMN,OAAO,CAACE,MAAR,CAAeK,MAAf,CAAsBT,MAAtB,CAAxB;AACA,QAAMU,KAAK,GAAG7B,GAAG,CAAC8B,GAAJ,CAAQtB,MAAR,CAAea,OAAO,CAACI,UAAvB,EAAmCJ,OAAO,CAACC,KAAR,CAAcS,IAAjD,EAAuDJ,SAAvD,CAAd;;AACA,MAAI,CAACN,OAAO,CAACW,QAAb,EAAuB;AACrB,UAAMZ,UAAU,CAACa,GAAX,CAAeJ,KAAf,EAAsBV,MAAtB,EAA8B;AAAEe,MAAAA,MAAM,EAAEb,OAAO,CAACa;AAAlB,KAA9B,CAAN;AACD;;AACD,SAAOL,KAAP;AACD,CAnBD;;AAqBA/B,OAAO,CAACoB,OAAR,GAAkBA,OAAlB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar cid = require('multiformats/cid');\nvar dagPB = require('@ipld/dag-pb');\nvar sha2 = require('multiformats/hashes/sha2');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  }\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar dagPB__namespace = /*#__PURE__*/_interopNamespace(dagPB);\n\nconst persist = async (buffer, blockstore, options) => {\n  if (!options.codec) {\n    options.codec = dagPB__namespace;\n  }\n  if (!options.hasher) {\n    options.hasher = sha2.sha256;\n  }\n  if (options.cidVersion === undefined) {\n    options.cidVersion = 1;\n  }\n  if (options.codec === dagPB__namespace && options.hasher !== sha2.sha256) {\n    options.cidVersion = 1;\n  }\n  const multihash = await options.hasher.digest(buffer);\n  const cid$1 = cid.CID.create(options.cidVersion, options.codec.code, multihash);\n  if (!options.onlyHash) {\n    await blockstore.put(cid$1, buffer, { signal: options.signal });\n  }\n  return cid$1;\n};\n\nexports.persist = persist;\n"]},"metadata":{},"sourceType":"script"}