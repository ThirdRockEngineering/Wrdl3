{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar errcode = require('err-code');\n\nvar toString = require('uint8arrays/to-string');\n\nvar fromString = require('uint8arrays/from-string');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar errcode__default = /*#__PURE__*/_interopDefaultLegacy(errcode);\n\nconst namespace = '/record/';\n\nfunction encodeBase32(buf) {\n  return toString.toString(buf, 'base32');\n}\n\nfunction keyToTopic(key) {\n  if (typeof key === 'string' || key instanceof String) {\n    key = fromString.fromString(key.toString());\n  }\n\n  const b64url = toString.toString(key, 'base64url');\n  return `${namespace}${b64url}`;\n}\n\nfunction topicToKey(topic) {\n  if (topic.substring(0, namespace.length) !== namespace) {\n    throw errcode__default[\"default\"](new Error('topic received is not from a record'), 'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE');\n  }\n\n  const key = topic.substring(namespace.length);\n  return fromString.fromString(key, 'base64url');\n}\n\nexports.encodeBase32 = encodeBase32;\nexports.keyToTopic = keyToTopic;\nexports.topicToKey = topicToKey;","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/datastore-pubsub/cjs/src/utils.js"],"names":["Object","defineProperty","exports","value","errcode","require","toString","fromString","_interopDefaultLegacy","e","errcode__default","namespace","encodeBase32","buf","keyToTopic","key","String","b64url","topicToKey","topic","substring","length","Error"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,OAAO,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,uBAAD,CAAtB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,yBAAD,CAAxB;;AAEA,SAASG,qBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,aAAaA,CAA3C,GAA+CA,CAA/C,GAAmD;AAAE,eAAWA;AAAb,GAA1D;AAA6E;;AAElH,IAAIC,gBAAgB,GAAG,aAAaF,qBAAqB,CAACJ,OAAD,CAAzD;;AAEA,MAAMO,SAAS,GAAG,UAAlB;;AACA,SAASC,YAAT,CAAsBC,GAAtB,EAA2B;AACzB,SAAOP,QAAQ,CAACA,QAAT,CAAkBO,GAAlB,EAAuB,QAAvB,CAAP;AACD;;AACD,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AACvB,MAAI,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,YAAYC,MAA9C,EAAsD;AACpDD,IAAAA,GAAG,GAAGR,UAAU,CAACA,UAAX,CAAsBQ,GAAG,CAACT,QAAJ,EAAtB,CAAN;AACD;;AACD,QAAMW,MAAM,GAAGX,QAAQ,CAACA,QAAT,CAAkBS,GAAlB,EAAuB,WAAvB,CAAf;AACA,SAAQ,GAAGJ,SAAW,GAAGM,MAAQ,EAAjC;AACD;;AACD,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACzB,MAAIA,KAAK,CAACC,SAAN,CAAgB,CAAhB,EAAmBT,SAAS,CAACU,MAA7B,MAAyCV,SAA7C,EAAwD;AACtD,UAAMD,gBAAgB,CAAC,SAAD,CAAhB,CAA4B,IAAIY,KAAJ,CAAU,qCAAV,CAA5B,EAA8E,wCAA9E,CAAN;AACD;;AACD,QAAMP,GAAG,GAAGI,KAAK,CAACC,SAAN,CAAgBT,SAAS,CAACU,MAA1B,CAAZ;AACA,SAAOd,UAAU,CAACA,UAAX,CAAsBQ,GAAtB,EAA2B,WAA3B,CAAP;AACD;;AAEDb,OAAO,CAACU,YAAR,GAAuBA,YAAvB;AACAV,OAAO,CAACY,UAAR,GAAqBA,UAArB;AACAZ,OAAO,CAACgB,UAAR,GAAqBA,UAArB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar errcode = require('err-code');\nvar toString = require('uint8arrays/to-string');\nvar fromString = require('uint8arrays/from-string');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar errcode__default = /*#__PURE__*/_interopDefaultLegacy(errcode);\n\nconst namespace = '/record/';\nfunction encodeBase32(buf) {\n  return toString.toString(buf, 'base32');\n}\nfunction keyToTopic(key) {\n  if (typeof key === 'string' || key instanceof String) {\n    key = fromString.fromString(key.toString());\n  }\n  const b64url = toString.toString(key, 'base64url');\n  return `${ namespace }${ b64url }`;\n}\nfunction topicToKey(topic) {\n  if (topic.substring(0, namespace.length) !== namespace) {\n    throw errcode__default[\"default\"](new Error('topic received is not from a record'), 'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE');\n  }\n  const key = topic.substring(namespace.length);\n  return fromString.fromString(key, 'base64url');\n}\n\nexports.encodeBase32 = encodeBase32;\nexports.keyToTopic = keyToTopic;\nexports.topicToKey = topicToKey;\n"]},"metadata":{},"sourceType":"script"}