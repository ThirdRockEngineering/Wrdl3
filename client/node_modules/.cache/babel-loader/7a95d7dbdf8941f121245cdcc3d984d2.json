{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar drain = require('it-drain');\n\nvar Errors = require('datastore-core/errors');\n\nvar debug = require('debug');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar drain__default = /*#__PURE__*/_interopDefaultLegacy(drain);\n\nvar debug__default = /*#__PURE__*/_interopDefaultLegacy(debug);\n\nconst log = Object.assign(debug__default[\"default\"]('ipfs:ipns:dht-datastore'), {\n  error: debug__default[\"default\"]('ipfs:ipns:dht-datastore:error')\n});\n\nclass DHTDatastore {\n  constructor(dht) {\n    this._dht = dht;\n  }\n\n  async put(key, value) {\n    try {\n      await drain__default[\"default\"](this._dht.put(key, value));\n    } catch (err) {\n      log.error(err);\n      throw err;\n    }\n  }\n\n  async get(key) {\n    for await (const event of this._dht.get(key)) {\n      if (event.name === 'VALUE') {\n        return event.value;\n      }\n    }\n\n    throw Errors.notFoundError();\n  }\n\n}\n\nexports.DHTDatastore = DHTDatastore;","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/ipfs-core/cjs/src/ipns/routing/dht-datastore.js"],"names":["Object","defineProperty","exports","value","drain","require","Errors","debug","_interopDefaultLegacy","e","drain__default","debug__default","log","assign","error","DHTDatastore","constructor","dht","_dht","put","key","err","get","event","name","notFoundError"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,UAAD,CAAnB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,uBAAD,CAApB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,OAAD,CAAnB;;AAEA,SAASG,qBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,aAAaA,CAA3C,GAA+CA,CAA/C,GAAmD;AAAE,eAAWA;AAAb,GAA1D;AAA6E;;AAElH,IAAIC,cAAc,GAAG,aAAaF,qBAAqB,CAACJ,KAAD,CAAvD;;AACA,IAAIO,cAAc,GAAG,aAAaH,qBAAqB,CAACD,KAAD,CAAvD;;AAEA,MAAMK,GAAG,GAAGZ,MAAM,CAACa,MAAP,CAAcF,cAAc,CAAC,SAAD,CAAd,CAA0B,yBAA1B,CAAd,EAAoE;AAAEG,EAAAA,KAAK,EAAEH,cAAc,CAAC,SAAD,CAAd,CAA0B,+BAA1B;AAAT,CAApE,CAAZ;;AACA,MAAMI,YAAN,CAAmB;AACjBC,EAAAA,WAAW,CAACC,GAAD,EAAM;AACf,SAAKC,IAAL,GAAYD,GAAZ;AACD;;AACQ,QAAHE,GAAG,CAACC,GAAD,EAAMjB,KAAN,EAAa;AACpB,QAAI;AACF,YAAMO,cAAc,CAAC,SAAD,CAAd,CAA0B,KAAKQ,IAAL,CAAUC,GAAV,CAAcC,GAAd,EAAmBjB,KAAnB,CAA1B,CAAN;AACD,KAFD,CAEE,OAAOkB,GAAP,EAAY;AACZT,MAAAA,GAAG,CAACE,KAAJ,CAAUO,GAAV;AACA,YAAMA,GAAN;AACD;AACF;;AACQ,QAAHC,GAAG,CAACF,GAAD,EAAM;AACb,eAAW,MAAMG,KAAjB,IAA0B,KAAKL,IAAL,CAAUI,GAAV,CAAcF,GAAd,CAA1B,EAA8C;AAC5C,UAAIG,KAAK,CAACC,IAAN,KAAe,OAAnB,EAA4B;AAC1B,eAAOD,KAAK,CAACpB,KAAb;AACD;AACF;;AACD,UAAMG,MAAM,CAACmB,aAAP,EAAN;AACD;;AAnBgB;;AAsBnBvB,OAAO,CAACa,YAAR,GAAuBA,YAAvB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar drain = require('it-drain');\nvar Errors = require('datastore-core/errors');\nvar debug = require('debug');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar drain__default = /*#__PURE__*/_interopDefaultLegacy(drain);\nvar debug__default = /*#__PURE__*/_interopDefaultLegacy(debug);\n\nconst log = Object.assign(debug__default[\"default\"]('ipfs:ipns:dht-datastore'), { error: debug__default[\"default\"]('ipfs:ipns:dht-datastore:error') });\nclass DHTDatastore {\n  constructor(dht) {\n    this._dht = dht;\n  }\n  async put(key, value) {\n    try {\n      await drain__default[\"default\"](this._dht.put(key, value));\n    } catch (err) {\n      log.error(err);\n      throw err;\n    }\n  }\n  async get(key) {\n    for await (const event of this._dht.get(key)) {\n      if (event.name === 'VALUE') {\n        return event.value;\n      }\n    }\n    throw Errors.notFoundError();\n  }\n}\n\nexports.DHTDatastore = DHTDatastore;\n"]},"metadata":{},"sourceType":"script"}