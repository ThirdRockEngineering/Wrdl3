{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar mortice = require('mortice');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar mortice__default = /*#__PURE__*/_interopDefaultLegacy(mortice);\n\nlet lock;\n\nfunction createLock() {\n  let repoOwner = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (lock) {\n    return lock;\n  }\n\n  const mutex = mortice__default[\"default\"]({\n    singleProcess: repoOwner\n  });\n  lock = {\n    readLock: func => {\n      return async function () {\n        const releaseLock = await mutex.readLock();\n\n        try {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          return await func.apply(null, args);\n        } finally {\n          releaseLock();\n        }\n      };\n    },\n    writeLock: func => {\n      return async function () {\n        const releaseLock = await mutex.writeLock();\n\n        try {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return await func.apply(null, args);\n        } finally {\n          releaseLock();\n        }\n      };\n    }\n  };\n  return lock;\n}\n\nexports.createLock = createLock;","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/ipfs-core/cjs/src/components/files/utils/create-lock.js"],"names":["Object","defineProperty","exports","value","mortice","require","_interopDefaultLegacy","e","mortice__default","lock","createLock","repoOwner","mutex","singleProcess","readLock","func","releaseLock","args","apply","writeLock"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AAEA,SAASC,qBAAT,CAAgCC,CAAhC,EAAmC;AAAE,SAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,aAAaA,CAA3C,GAA+CA,CAA/C,GAAmD;AAAE,eAAWA;AAAb,GAA1D;AAA6E;;AAElH,IAAIC,gBAAgB,GAAG,aAAaF,qBAAqB,CAACF,OAAD,CAAzD;;AAEA,IAAIK,IAAJ;;AACA,SAASC,UAAT,GAAuC;AAAA,MAAnBC,SAAmB,uEAAP,KAAO;;AACrC,MAAIF,IAAJ,EAAU;AACR,WAAOA,IAAP;AACD;;AACD,QAAMG,KAAK,GAAGJ,gBAAgB,CAAC,SAAD,CAAhB,CAA4B;AAAEK,IAAAA,aAAa,EAAEF;AAAjB,GAA5B,CAAd;AACAF,EAAAA,IAAI,GAAG;AACLK,IAAAA,QAAQ,EAAEC,IAAI,IAAI;AAChB,aAAO,kBAAmB;AACxB,cAAMC,WAAW,GAAG,MAAMJ,KAAK,CAACE,QAAN,EAA1B;;AACA,YAAI;AAAA,4CAFWG,IAEX;AAFWA,YAAAA,IAEX;AAAA;;AACF,iBAAO,MAAMF,IAAI,CAACG,KAAL,CAAW,IAAX,EAAiBD,IAAjB,CAAb;AACD,SAFD,SAEU;AACRD,UAAAA,WAAW;AACZ;AACF,OAPD;AAQD,KAVI;AAWLG,IAAAA,SAAS,EAAEJ,IAAI,IAAI;AACjB,aAAO,kBAAmB;AACxB,cAAMC,WAAW,GAAG,MAAMJ,KAAK,CAACO,SAAN,EAA1B;;AACA,YAAI;AAAA,6CAFWF,IAEX;AAFWA,YAAAA,IAEX;AAAA;;AACF,iBAAO,MAAMF,IAAI,CAACG,KAAL,CAAW,IAAX,EAAiBD,IAAjB,CAAb;AACD,SAFD,SAEU;AACRD,UAAAA,WAAW;AACZ;AACF,OAPD;AAQD;AApBI,GAAP;AAsBA,SAAOP,IAAP;AACD;;AAEDP,OAAO,CAACQ,UAAR,GAAqBA,UAArB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar mortice = require('mortice');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar mortice__default = /*#__PURE__*/_interopDefaultLegacy(mortice);\n\nlet lock;\nfunction createLock(repoOwner = false) {\n  if (lock) {\n    return lock;\n  }\n  const mutex = mortice__default[\"default\"]({ singleProcess: repoOwner });\n  lock = {\n    readLock: func => {\n      return async (...args) => {\n        const releaseLock = await mutex.readLock();\n        try {\n          return await func.apply(null, args);\n        } finally {\n          releaseLock();\n        }\n      };\n    },\n    writeLock: func => {\n      return async (...args) => {\n        const releaseLock = await mutex.writeLock();\n        try {\n          return await func.apply(null, args);\n        } finally {\n          releaseLock();\n        }\n      };\n    }\n  };\n  return lock;\n}\n\nexports.createLock = createLock;\n"]},"metadata":{},"sourceType":"script"}