{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar index = require('../wantlist/index.js');\n\nclass Ledger {\n  constructor(peerId) {\n    this.partner = peerId;\n    this.wantlist = new index.Wantlist();\n    this.exchangeCount = 0;\n    this.sentToPeer = new Map();\n    this.accounting = {\n      bytesSent: 0,\n      bytesRecv: 0\n    };\n  }\n\n  sentBytes(n) {\n    this.exchangeCount++;\n    this.lastExchange = new Date().getTime();\n    this.accounting.bytesSent += n;\n  }\n\n  receivedBytes(n) {\n    this.exchangeCount++;\n    this.lastExchange = new Date().getTime();\n    this.accounting.bytesRecv += n;\n  }\n\n  wants(cid, priority, wantType) {\n    this.wantlist.add(cid, priority, wantType);\n  }\n\n  cancelWant(cid) {\n    this.wantlist.remove(cid);\n  }\n\n  wantlistContains(cid) {\n    return this.wantlist.get(cid);\n  }\n\n  debtRatio() {\n    return this.accounting.bytesSent / (this.accounting.bytesRecv + 1);\n  }\n\n}\n\nexports.Ledger = Ledger;","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/ipfs-bitswap/cjs/src/decision-engine/ledger.js"],"names":["Object","defineProperty","exports","value","index","require","Ledger","constructor","peerId","partner","wantlist","Wantlist","exchangeCount","sentToPeer","Map","accounting","bytesSent","bytesRecv","sentBytes","n","lastExchange","Date","getTime","receivedBytes","wants","cid","priority","wantType","add","cancelWant","remove","wantlistContains","get","debtRatio"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,KAAK,GAAGC,OAAO,CAAC,sBAAD,CAAnB;;AAEA,MAAMC,MAAN,CAAa;AACXC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAClB,SAAKC,OAAL,GAAeD,MAAf;AACA,SAAKE,QAAL,GAAgB,IAAIN,KAAK,CAACO,QAAV,EAAhB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;AACA,SAAKC,UAAL,GAAkB;AAChBC,MAAAA,SAAS,EAAE,CADK;AAEhBC,MAAAA,SAAS,EAAE;AAFK,KAAlB;AAID;;AACDC,EAAAA,SAAS,CAACC,CAAD,EAAI;AACX,SAAKP,aAAL;AACA,SAAKQ,YAAL,GAAoB,IAAIC,IAAJ,GAAWC,OAAX,EAApB;AACA,SAAKP,UAAL,CAAgBC,SAAhB,IAA6BG,CAA7B;AACD;;AACDI,EAAAA,aAAa,CAACJ,CAAD,EAAI;AACf,SAAKP,aAAL;AACA,SAAKQ,YAAL,GAAoB,IAAIC,IAAJ,GAAWC,OAAX,EAApB;AACA,SAAKP,UAAL,CAAgBE,SAAhB,IAA6BE,CAA7B;AACD;;AACDK,EAAAA,KAAK,CAACC,GAAD,EAAMC,QAAN,EAAgBC,QAAhB,EAA0B;AAC7B,SAAKjB,QAAL,CAAckB,GAAd,CAAkBH,GAAlB,EAAuBC,QAAvB,EAAiCC,QAAjC;AACD;;AACDE,EAAAA,UAAU,CAACJ,GAAD,EAAM;AACd,SAAKf,QAAL,CAAcoB,MAAd,CAAqBL,GAArB;AACD;;AACDM,EAAAA,gBAAgB,CAACN,GAAD,EAAM;AACpB,WAAO,KAAKf,QAAL,CAAcsB,GAAd,CAAkBP,GAAlB,CAAP;AACD;;AACDQ,EAAAA,SAAS,GAAG;AACV,WAAO,KAAKlB,UAAL,CAAgBC,SAAhB,IAA6B,KAAKD,UAAL,CAAgBE,SAAhB,GAA4B,CAAzD,CAAP;AACD;;AAhCU;;AAmCbf,OAAO,CAACI,MAAR,GAAiBA,MAAjB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar index = require('../wantlist/index.js');\n\nclass Ledger {\n  constructor(peerId) {\n    this.partner = peerId;\n    this.wantlist = new index.Wantlist();\n    this.exchangeCount = 0;\n    this.sentToPeer = new Map();\n    this.accounting = {\n      bytesSent: 0,\n      bytesRecv: 0\n    };\n  }\n  sentBytes(n) {\n    this.exchangeCount++;\n    this.lastExchange = new Date().getTime();\n    this.accounting.bytesSent += n;\n  }\n  receivedBytes(n) {\n    this.exchangeCount++;\n    this.lastExchange = new Date().getTime();\n    this.accounting.bytesRecv += n;\n  }\n  wants(cid, priority, wantType) {\n    this.wantlist.add(cid, priority, wantType);\n  }\n  cancelWant(cid) {\n    this.wantlist.remove(cid);\n  }\n  wantlistContains(cid) {\n    return this.wantlist.get(cid);\n  }\n  debtRatio() {\n    return this.accounting.bytesSent / (this.accounting.bytesRecv + 1);\n  }\n}\n\nexports.Ledger = Ledger;\n"]},"metadata":{},"sourceType":"script"}