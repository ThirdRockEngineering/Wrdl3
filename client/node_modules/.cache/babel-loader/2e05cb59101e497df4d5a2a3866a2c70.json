{"ast":null,"code":"const FixedFIFO = require('./fixed-size');\n\nmodule.exports = class FastFIFO {\n  constructor(hwm) {\n    this.hwm = hwm || 16;\n    this.head = new FixedFIFO(this.hwm);\n    this.tail = this.head;\n  }\n\n  push(val) {\n    if (!this.head.push(val)) {\n      const prev = this.head;\n      this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length);\n      this.head.push(val);\n    }\n  }\n\n  shift() {\n    const val = this.tail.shift();\n\n    if (val === undefined && this.tail.next) {\n      const next = this.tail.next;\n      this.tail.next = null;\n      this.tail = next;\n      return this.tail.shift();\n    }\n\n    return val;\n  }\n\n  peek() {\n    return this.tail.peek();\n  }\n\n  isEmpty() {\n    return this.head.isEmpty();\n  }\n\n};","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/fast-fifo/index.js"],"names":["FixedFIFO","require","module","exports","FastFIFO","constructor","hwm","head","tail","push","val","prev","next","buffer","length","shift","undefined","peek","isEmpty"],"mappings":"AAAA,MAAMA,SAAS,GAAGC,OAAO,CAAC,cAAD,CAAzB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,MAAMC,QAAN,CAAe;AAC9BC,EAAAA,WAAW,CAAEC,GAAF,EAAO;AAChB,SAAKA,GAAL,GAAWA,GAAG,IAAI,EAAlB;AACA,SAAKC,IAAL,GAAY,IAAIP,SAAJ,CAAc,KAAKM,GAAnB,CAAZ;AACA,SAAKE,IAAL,GAAY,KAAKD,IAAjB;AACD;;AAEDE,EAAAA,IAAI,CAAEC,GAAF,EAAO;AACT,QAAI,CAAC,KAAKH,IAAL,CAAUE,IAAV,CAAeC,GAAf,CAAL,EAA0B;AACxB,YAAMC,IAAI,GAAG,KAAKJ,IAAlB;AACA,WAAKA,IAAL,GAAYI,IAAI,CAACC,IAAL,GAAY,IAAIZ,SAAJ,CAAc,IAAI,KAAKO,IAAL,CAAUM,MAAV,CAAiBC,MAAnC,CAAxB;AACA,WAAKP,IAAL,CAAUE,IAAV,CAAeC,GAAf;AACD;AACF;;AAEDK,EAAAA,KAAK,GAAI;AACP,UAAML,GAAG,GAAG,KAAKF,IAAL,CAAUO,KAAV,EAAZ;;AACA,QAAIL,GAAG,KAAKM,SAAR,IAAqB,KAAKR,IAAL,CAAUI,IAAnC,EAAyC;AACvC,YAAMA,IAAI,GAAG,KAAKJ,IAAL,CAAUI,IAAvB;AACA,WAAKJ,IAAL,CAAUI,IAAV,GAAiB,IAAjB;AACA,WAAKJ,IAAL,GAAYI,IAAZ;AACA,aAAO,KAAKJ,IAAL,CAAUO,KAAV,EAAP;AACD;;AACD,WAAOL,GAAP;AACD;;AAEDO,EAAAA,IAAI,GAAI;AACN,WAAO,KAAKT,IAAL,CAAUS,IAAV,EAAP;AACD;;AAEDC,EAAAA,OAAO,GAAI;AACT,WAAO,KAAKX,IAAL,CAAUW,OAAV,EAAP;AACD;;AAhC6B,CAAhC","sourcesContent":["const FixedFIFO = require('./fixed-size')\n\nmodule.exports = class FastFIFO {\n  constructor (hwm) {\n    this.hwm = hwm || 16\n    this.head = new FixedFIFO(this.hwm)\n    this.tail = this.head\n  }\n\n  push (val) {\n    if (!this.head.push(val)) {\n      const prev = this.head\n      this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length)\n      this.head.push(val)\n    }\n  }\n\n  shift () {\n    const val = this.tail.shift()\n    if (val === undefined && this.tail.next) {\n      const next = this.tail.next\n      this.tail.next = null\n      this.tail = next\n      return this.tail.shift()\n    }\n    return val\n  }\n\n  peek () {\n    return this.tail.peek()\n  }\n\n  isEmpty () {\n    return this.head.isEmpty()\n  }\n}\n"]},"metadata":{},"sourceType":"script"}