{"ast":null,"code":"\"use strict\"; // Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar browser_1 = require(\"./browser\");\n\nvar node_1 = require(\"./node\");\n\nvar SystemRandomSource =\n/** @class */\nfunction () {\n  function SystemRandomSource() {\n    this.isAvailable = false;\n    this.name = \"\"; // Try browser.\n\n    this._source = new browser_1.BrowserRandomSource();\n\n    if (this._source.isAvailable) {\n      this.isAvailable = true;\n      this.name = \"Browser\";\n      return;\n    } // If no browser source, try Node.\n\n\n    this._source = new node_1.NodeRandomSource();\n\n    if (this._source.isAvailable) {\n      this.isAvailable = true;\n      this.name = \"Node\";\n      return;\n    } // No sources, we're out of options.\n\n  }\n\n  SystemRandomSource.prototype.randomBytes = function (length) {\n    if (!this.isAvailable) {\n      throw new Error(\"System random byte generator is not available.\");\n    }\n\n    return this._source.randomBytes(length);\n  };\n\n  return SystemRandomSource;\n}();\n\nexports.SystemRandomSource = SystemRandomSource;","map":{"version":3,"mappings":"cAAA;AACA;;;;;;AAGA;;AACA;;AAEA;AAAA;AAAA;AAKI;AAJA,uBAAc,KAAd;AACA,gBAAO,EAAP,CAGA,CACI;;AACA,SAAKA,OAAL,GAAe,IAAIC,6BAAJ,EAAf;;AACA,QAAI,KAAKD,OAAL,CAAaE,WAAjB,EAA8B;AAC1B,WAAKA,WAAL,GAAmB,IAAnB;AACA,WAAKC,IAAL,GAAY,SAAZ;AACA;AACH,KAPL,CASI;;;AACA,SAAKH,OAAL,GAAe,IAAII,uBAAJ,EAAf;;AACA,QAAI,KAAKJ,OAAL,CAAaE,WAAjB,EAA8B;AAC1B,WAAKA,WAAL,GAAmB,IAAnB;AACA,WAAKC,IAAL,GAAY,MAAZ;AACA;AACH,KAfL,CAiBI;;AACH;;AAEDE,uDAAYC,MAAZ,EAA0B;AACtB,QAAI,CAAC,KAAKJ,WAAV,EAAuB;AACnB,YAAM,IAAIK,KAAJ,CAAU,gDAAV,CAAN;AACH;;AACD,WAAO,KAAKP,OAAL,CAAaQ,WAAb,CAAyBF,MAAzB,CAAP;AACH,GALD;;AAMJ;AAAC,CA/BD;;AAAaG","names":["_source","browser_1","isAvailable","name","node_1","SystemRandomSource","length","Error","randomBytes","exports"],"sourceRoot":"","sources":["../../source/system.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}