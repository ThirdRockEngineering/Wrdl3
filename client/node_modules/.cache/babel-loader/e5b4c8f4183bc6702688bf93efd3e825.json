{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar withTimeoutOption = require('ipfs-core-utils/with-timeout-option');\n\nvar constants = require('ipfs-repo/constants');\n\nfunction createVersion(_ref) {\n  let {\n    repo\n  } = _ref;\n\n  async function version() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    try {\n      await repo._checkInitialized(options);\n    } catch (err) {\n      const match = [/Key not found in database \\[\\/version\\]/, /ENOENT/, /repo is not initialized yet/].some(m => {\n        return m.test(err.message);\n      });\n\n      if (match) {\n        return constants.repoVersion;\n      }\n\n      throw err;\n    }\n\n    return repo.version.get();\n  }\n\n  return withTimeoutOption.withTimeoutOption(version);\n}\n\nexports.createVersion = createVersion;","map":{"version":3,"sources":["/Users/emilsharafutdinov/Desktop/Work/SR3/Wrdl3/client/node_modules/ipfs-core/cjs/src/components/repo/version.js"],"names":["Object","defineProperty","exports","value","withTimeoutOption","require","constants","createVersion","repo","version","options","_checkInitialized","err","match","some","m","test","message","repoVersion","get"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,iBAAiB,GAAGC,OAAO,CAAC,qCAAD,CAA/B;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,qBAAD,CAAvB;;AAEA,SAASE,aAAT,OAA+B;AAAA,MAAR;AAACC,IAAAA;AAAD,GAAQ;;AAC7B,iBAAeC,OAAf,GAAqC;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AACnC,QAAI;AACF,YAAMF,IAAI,CAACG,iBAAL,CAAuBD,OAAvB,CAAN;AACD,KAFD,CAEE,OAAOE,GAAP,EAAY;AACZ,YAAMC,KAAK,GAAG,CACZ,yCADY,EAEZ,QAFY,EAGZ,6BAHY,EAIZC,IAJY,CAIPC,CAAC,IAAI;AACV,eAAOA,CAAC,CAACC,IAAF,CAAOJ,GAAG,CAACK,OAAX,CAAP;AACD,OANa,CAAd;;AAOA,UAAIJ,KAAJ,EAAW;AACT,eAAOP,SAAS,CAACY,WAAjB;AACD;;AACD,YAAMN,GAAN;AACD;;AACD,WAAOJ,IAAI,CAACC,OAAL,CAAaU,GAAb,EAAP;AACD;;AACD,SAAOf,iBAAiB,CAACA,iBAAlB,CAAoCK,OAApC,CAAP;AACD;;AAEDP,OAAO,CAACK,aAAR,GAAwBA,aAAxB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar withTimeoutOption = require('ipfs-core-utils/with-timeout-option');\nvar constants = require('ipfs-repo/constants');\n\nfunction createVersion({repo}) {\n  async function version(options = {}) {\n    try {\n      await repo._checkInitialized(options);\n    } catch (err) {\n      const match = [\n        /Key not found in database \\[\\/version\\]/,\n        /ENOENT/,\n        /repo is not initialized yet/\n      ].some(m => {\n        return m.test(err.message);\n      });\n      if (match) {\n        return constants.repoVersion;\n      }\n      throw err;\n    }\n    return repo.version.get();\n  }\n  return withTimeoutOption.withTimeoutOption(version);\n}\n\nexports.createVersion = createVersion;\n"]},"metadata":{},"sourceType":"script"}